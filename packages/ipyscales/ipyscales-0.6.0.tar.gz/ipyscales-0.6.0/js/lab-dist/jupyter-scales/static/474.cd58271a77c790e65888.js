(self.webpackChunkjupyter_scales=self.webpackChunkjupyter_scales||[]).push([[474],{2485:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorBarView=t.ColorBarModel=void 0;const i=s(9812),r=s(3197),a=s(885),o=s(8657);class n extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:n.model_name,_model_module:n.model_module,_model_module_version:n.model_module_version,_view_name:n.view_name,_view_module:n.view_module,_view_module_version:n.view_module_version,colormap:null,orientation:"vertical",side:"bottomright",length:100,breadth:30,border_thickness:1,title:null,padding:5,title_padding:0,axis_padding:0})}initialize(e,t){super.initialize(e,t),this.setupListeners()}setupListeners(){const e="colormap";var t=this.get(e);t&&(this.listenTo(t,"change",this.onChildChanged.bind(this)),this.listenTo(t,"childchange",this.onChildChanged.bind(this))),this.on("change:colormap",((t,s)=>{var i=this.previous(e),r=s;i&&this.stopListening(i),r&&(this.listenTo(r,"change",this.onChildChanged.bind(this)),this.listenTo(r,"childchange",this.onChildChanged.bind(this)))}),this)}onChildChanged(e){this.trigger("childchange",this)}}t.ColorBarModel=n,n.serializers=Object.assign(Object.assign({},i.DOMWidgetModel.serializers),{colormap:{deserialize:i.unpack_models}}),n.model_name="ColorBarModel",n.model_module=o.MODULE_NAME,n.model_module_version=o.MODULE_VERSION,n.view_name="ColorBarView",n.view_module=o.MODULE_NAME,n.view_module_version=o.MODULE_VERSION;class l extends i.DOMWidgetView{render(){const e=this.model.get("colormap");this.barFunc=r.chromabar(e.obj),this.onChange(),this.model.on("change",this.onChange,this),this.model.on("childchange",this.onChange,this)}processPhosphorMessage(e){switch(super.processPhosphorMessage.call(this,e),e.type){case"after-attach":this.onChange()}}onChange(){this.barFunc.orientation(this.model.get("orientation")).side(this.model.get("side")).barLength(this.model.get("length")).breadth(this.model.get("breadth")).borderThickness(this.model.get("border_thickness")).title(this.model.get("title")).padding(this.model.get("padding")).titlePadding(this.model.get("title_padding")).axisPadding(this.model.get("axis_padding"));let e=a.select(this.el).selectAll("svg.jupyterColorbar").data([null]);e=e.merge(e.enter().append("svg").attr("class","jupyterColorbar")).call(this.barFunc)}}t.ColorBarView=l},9414:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorMapEditorView=t.ColorMapEditorModel=void 0;const i=s(9812),r=s(3197),a=s(885),o=s(8657);class n extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:n.model_name,_model_module:n.model_module,_model_module_version:n.model_module_version,_view_name:n.view_name,_view_module:n.view_module,_view_module_version:n.view_module_version,colormap:null,orientation:"horizontal",length:300,breadth:30,padding:5,border_thickness:1})}initialize(e,t){super.initialize(e,t),this.setupListeners()}setupListeners(){const e="colormap";var t=this.get(e);t&&(this.listenTo(t,"change",this.onChildChanged.bind(this)),this.listenTo(t,"childchange",this.onChildChanged.bind(this))),this.on("change:colormap",((t,s)=>{var i=this.previous(e),r=s;i&&this.stopListening(i),r&&(this.listenTo(r,"change",this.onChildChanged.bind(this)),this.listenTo(r,"childchange",this.onChildChanged.bind(this)))}),this)}onChildChanged(e){this.trigger("childchange",this)}}t.ColorMapEditorModel=n,n.serializers=Object.assign(Object.assign({},i.DOMWidgetModel.serializers),{colormap:{deserialize:i.unpack_models}}),n.model_name="ColorMapEditorModel",n.model_module=o.MODULE_NAME,n.model_module_version=o.MODULE_VERSION,n.view_name="ColorMapEditorView",n.view_module=o.MODULE_NAME,n.view_module_version=o.MODULE_VERSION;class l extends i.DOMWidgetView{render(){const e=this.model.get("colormap");this.editorFn=r.chromaEditor(e.obj).onUpdate((t=>{e.syncToModel({}),t&&e.save_changes()})),this.onChange(),this.model.on("change",this.tick,this),this.model.on("childchange",this.tick,this)}tick(){requestAnimationFrame(this.onChange.bind(this))}onChange(){this.editorFn.orientation(this.model.get("orientation")).barLength(this.model.get("length")).breadth(this.model.get("breadth")).padding(this.model.get("padding")).borderThickness(this.model.get("border_thickness"));let e=a.select(this.el).selectAll("svg.jupyterColorbar").data([null]);e=e.merge(e.enter().append("svg").attr("class","jupyterColorbar")),e.call(this.editorFn)}}t.ColorMapEditorView=l},2456:function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||i(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(s(2485),t),r(s(9414),t),r(s(9610),t)},9610:function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.colormapAsRGBAArray=t.colormapAsRGBArray=t.isColorMapModel=t.NamedOrdinalColorMap=t.NamedDivergingColorMap=t.NamedSequentialColorMap=t.ArrayColorScaleModel=t.LogColorScaleModel=t.LinearColorScaleModel=void 0;const o=s(6404),n=s(2302),l=s(4735),d=a(s(9109)),c=s(5486),u=s(9180),h=s(4893),p=s(1426),m=s(6988);class g extends h.LinearScaleModel{constructor(){super(...arguments),this.isColorScale=!0}defaults(){return Object.assign(Object.assign({},super.defaults()),{range:["black","white"]})}}t.LinearColorScaleModel=g;class b extends h.LogScaleModel{constructor(){super(...arguments),this.isColorScale=!0}defaults(){return Object.assign(Object.assign({},super.defaults()),{range:["black","white"]})}}t.LogColorScaleModel=b,b.model_name="LogColorScaleModel";class _ extends p.SequentialScaleModel{constructor(){super(...arguments),this.isColorScale=!0,this.colorInterp=null}defaults(){return Object.assign(Object.assign({},super.defaults()),{colors:u(new Float32Array([0,0,0,1,1,1]),[2,3]),space:"rgb",gamma:1})}createInterpolator(){const e=this.get("space"),t=this.get("colors"),s="hsl"===e?o.hsl:o.rgb,i=[],r=t.shape[1]>3;if("hsl"===e){for(let e=0;e<t.shape[0];++e)i.push(s(360*t.get(e,0),t.get(e,1),t.get(e,2),r?t.get(e,3):1));return n.piecewise(n.interpolateHsl,i)}for(let e=0;e<t.shape[0];++e)i.push(s(255*t.get(e,0),255*t.get(e,1),255*t.get(e,2),r?t.get(e,3):1));let a=this.get("gamma");return null==a&&(a=1),n.piecewise(n.interpolateRgb.gamma(a),i)}syncToObject(){super.syncToObject(),["colors","space","gamma"].some((e=>this.hasChanged(e)))&&this.obj.interpolator(this.createInterpolator())}constructObject(){return l.scaleSequential(this.createInterpolator())}}t.ArrayColorScaleModel=_,_.model_name="ArrayColorScaleModel",_.serializers=Object.assign(Object.assign({},p.SequentialScaleModel.serializers),{colors:c.data_union_array_serialization});const f={};for(let e of Object.keys(d))if(0===e.indexOf("interpolate")){const t=e.slice("interpolate".length).toLowerCase();f[t]=d[e]}const O={};for(let e of Object.keys(d))if(0===e.indexOf("scheme")){const t=e.slice("scheme".length).toLowerCase();O[t]=d[e]}function y(e){return e.length<4||!Array.isArray(e[3])}class j extends p.SequentialScaleModel{constructor(){super(...arguments),this.isColorScale=!0}getInterpolatorFactory(){let e=this.get("name");return f[e.toLowerCase()]}getInterpolatorFactoryName(){const e=this.obj.interpolator(),t=d;for(let s of Object.keys(t))if(e===t[s])return s.replace(/^interpolate/,"");throw new Error(`Unknown color interpolator name of function: ${e}`)}constructObject(){const e=this.getInterpolatorFactory();return l.scaleSequential(e)}syncToObject(){super.syncToObject();const e=this.getInterpolatorFactory();this.obj.interpolator(e)}syncToModel(e){e.name=this.getInterpolatorFactoryName(),super.syncToModel(e)}}class v extends j{defaults(){return Object.assign(Object.assign({},super.defaults()),{name:"Viridis"})}}t.NamedSequentialColorMap=v,v.model_name="NamedSequentialColorMap";class M extends j{defaults(){return Object.assign(Object.assign({},super.defaults()),{name:"BrBG",domain:[0,.5,1]})}constructObject(){const e=this.getInterpolatorFactory();return l.scaleDiverging(e)}}t.NamedDivergingColorMap=M,M.model_name="NamedDivergingColorMap";class w extends p.OrdinalScaleModel{constructor(){super(...arguments),this.isColorScale=!0}defaults(){const e=Object.assign(Object.assign({},super.defaults()),{name:"Category10",cardinality:10});return delete e.range,e}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.splice(this.simpleProperties.indexOf("range"),1)}getScheme(){const e=this.get("name"),t=O[e.toLowerCase()];if(!t)throw new Error(`Unknown scheme name: ${e}`);return y(t)?t:t[this.get("cardinality")]}getSchemeName(){const e=this.obj.range(),t=d;for(let s of Object.keys(t)){let i=t[s];if(i&&Array.isArray(i)&&(y(i)||(i=i[e.length],i))&&m.arrayEquals(e,i))return s.replace(/^scheme/,"")}throw new Error(`Unknown color scheme name for range: ${e}`)}constructObject(){const e=this.getScheme();return l.scaleOrdinal(e)}syncToObject(){super.syncToObject();const e=this.getScheme();this.obj.range(e)}syncToModel(e){e.name=this.getSchemeName(),super.syncToModel(e)}}t.NamedOrdinalColorMap=w,w.model_name="NamedOrdinalColorMap",t.isColorMapModel=function(e){return null!=e&&!0===e.isColorScale},t.colormapAsRGBArray=function(e,t){let s;"number"==typeof t?(s=t,t=new Uint8ClampedArray(3*s)):s=t.length/3;const i=e.obj.copy().domain([0,s]);for(let e=0;e<s;++e){const s=o.rgb(i(e));t[3*e+0]=s.r,t[3*e+1]=s.g,t[3*e+2]=s.b}return t},t.colormapAsRGBAArray=function(e,t){let s,i;"number"==typeof t?(s=t,t=new Uint8ClampedArray(4*s)):s=t.length/4;let r=Array.from(new Array(s),((e,t)=>t));e instanceof M?i=e.obj.copy().domain([0,s/2,s]):e instanceof p.OrdinalScaleModel?(i=e.obj,r=i.domain()):i=e.obj.copy().domain([0,s-1]);for(let e of r){const s=o.rgb(i(e));t[4*e+0]=s.r,t[4*e+1]=s.g,t[4*e+2]=s.b,t[4*e+3]=255*s.opacity}return t}},4893:function(e,t,s){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,s,i){void 0===i&&(i=s),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,i){void 0===i&&(i=s),e[i]=t[s]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.prototype.hasOwnProperty.call(e,s)&&i(t,e,s);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.PowScaleModel=t.LogScaleModel=t.LinearScaleModel=t.ContinuousScaleModel=void 0;const o=s(4735),n=a(s(2302)),l=s(1426);class d extends l.ScaleModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{domain:[0,1],range:[0,1],interpolator:"interpolate",clamp:!1})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("domain","range","clamp")}syncToObject(){super.syncToObject();let e=this.get("interpolator")||"interpolate",t=n[e];this.obj.interpolate(t)}syncToModel(e){let t=this.obj.interpolate();e.interpolator=function(e){for(let t of Object.keys(n))if(n[t]===e)return t;throw ReferenceError(`Cannot find name of interpolator ${e}`)}(t),super.syncToModel(e)}}t.ContinuousScaleModel=d,d.serializers=Object.assign({},l.ScaleModel.serializers);class c extends d{constructObject(){return o.scaleLinear()}}t.LinearScaleModel=c,c.serializers=Object.assign({},d.serializers),c.model_name="LinearScaleModel";class u extends d{defaults(){return Object.assign(Object.assign({},super.defaults()),{base:10,domain:[1,10]})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("base")}constructObject(){return o.scaleLog()}}t.LogScaleModel=u,u.serializers=Object.assign({},d.serializers),u.model_name="LogScaleModel";class h extends d{defaults(){return this.constructor,Object.assign(Object.assign({},super.defaults()),{exponent:1})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("exponent")}constructObject(){return o.scalePow()}}t.PowScaleModel=h,h.serializers=Object.assign({},d.serializers),h.model_name="PowScaleModel"},7593:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScaledArrayModel=t.arrayFrom=void 0;const i=s(9812),r=s(5486),a=s(8295),o=s(2456),n=s(8657),l=s(6988),d=s(9180);function c(e,t,s){if(t=t||e.dtype,s=s||e.shape,"buffer"===t||"generic"===t||"array"===t)throw new Error(`Cannot create ndarray of dtype "${t}".`);return d(new r.typesToArray[t](s.reduce(((e,t)=>e*t),1)),s,e.stride,e.offset)}t.arrayFrom=c;class u extends a.DataModel{defaults(){const e=this.constructor;return Object.assign(Object.assign({},super.defaults()),{_model_name:e.model_name,_model_module:e.model_module,_model_module_version:e.model_module_version,_view_name:e.view_name,_view_module:e.view_module,_view_module_version:e.view_module_version,data:d([]),scale:null,scaledData:null,output_dtype:"inherit"})}computeScaledData(e){e="object"==typeof e?Object.assign(Object.assign({},e),{setScaled:!0}):{setScaled:!0};let t=r.getArray(this.get("data")),s=this.get("scale");if(null===t||null===s)return void this.set("scaledData",null,e);let i=this.arrayMismatch(),a=this.get("scaledData");if(i)a=c(t,this.scaledDtype(),this.scaledShape());else{const e=a._version+1||0;a=d(a.data,a.shape,a.stride,a.offset),a._version=e}let n=t.data,u=a.data;if(o.isColorMapModel(s))for(let e=0;e<n.length;++e){const t=l.parseCssColor(s.obj(n[e]));u[4*e+0]=t[0],u[4*e+1]=t[1],u[4*e+2]=t[2],u[4*e+3]=t[3]}else for(let e=0;e<n.length;++e)u[e]=s.obj(n[e]);this.set("scaledData",a,e)}initialize(e,t){super.initialize(e,t);const s=this.get("scale")||void 0;this.initPromise=Promise.resolve(s&&s.initPromise).then((()=>{this.computeScaledData(),this.setupListeners()}))}setupListeners(){this.on("change:scale",this.onChange,this),r.listenToUnion(this,"data",this.onChange.bind(this),!0),this.listenTo(this.get("scale"),"change",this.onChange),this.on("change:scale",((e,t,s)=>{const i=this.previous("scale"),r=t;i&&this.stopListening(i),r&&this.listenTo(r,"change",this.onChange.bind(this))}),this)}getNDArray(e="scaledData"){return"scaledData"===e?(null===this.get("scaledData")&&this.computeScaledData(),this.get("scaledData")):this.get(e)}canWriteBack(e="scaledData"){if("data"===e)return!0;if("scaledData"!==e)return!1;const t=this.get("scale");return!o.isColorMapModel(t)&&!!t&&"function"==typeof t.obj.invert}setNDArray(e,t="scaledData",s){if("scaledData"===t){const t=r.getArray(this.get("data")),i=this.get("scale");if(null===e||null===i)return void r.setArray(this,"data",null,s);const a=c(e,t?t.dtype:e.dtype,e.shape);let o=e.data,n=a.data;for(let e=0;e<o.length;++e)n[e]=i.obj.invert(o[e]);r.setArray(this,"data",a,s)}else r.setArray(this,t,e,s)}onChange(e,t){t&&!0===t.setScaled||this.computeScaledData(t)}arrayMismatch(){const e=this.get("scaledData");return!((!e||e.dtype===this.scaledDtype())&&(t=e&&e.shape,s=this.scaledShape(),null===t&&null===s||null!==t&&null!==s&&JSON.stringify(t)===JSON.stringify(s)));var t,s}scaledDtype(){let e=this.get("output_dtype");if("inherit"!==e)return e;let t=r.getArray(this.get("data"));return null===t?null:t.dtype}scaledShape(){const e=this.get("scale"),t=r.getArray(this.get("data"));return o.isColorMapModel(e)?t&&t.shape.concat(4):t&&t.shape}}t.ScaledArrayModel=u,u.serializers=Object.assign(Object.assign({},a.DataModel.serializers),{data:r.data_union_serialization,scale:{deserialize:i.unpack_models},scaledData:{serialize:l.undefSerializer}}),u.model_name="ScaledArrayModel",u.model_module=n.MODULE_NAME,u.model_module_version=n.MODULE_VERSION},1426:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrdinalScaleModel=t.TresholdScaleModel=t.QuantileScaleModel=t.QuantizeScaleModel=t.SequentialScaleModel=t.ScaleModel=void 0;const i=s(9812),r=s(4735),a=s(5486),o=s(8657);class n extends i.WidgetModel{defaults(){const e=this.constructor;return Object.assign(Object.assign({},super.defaults()),{_model_name:e.model_name,_model_module:e.model_module,_model_module_version:e.model_module_version,_view_name:e.view_name,_view_module:e.view_module,_view_module_version:e.view_module_version})}initialize(e,t){super.initialize(e,t),this.createPropertiesArrays(),this.initPromise=this.createObject().then((()=>{this.syncToObject(),this.syncToModel({}),this.setupListeners()}))}createPropertiesArrays(){this.datawidgetProperties=[],this.childModelProperties=[],this.simpleProperties=[]}syncToModel(e){for(let t of this.simpleProperties)e[t]=this.obj[t]();this.set(e,"pushFromObject")}syncToObject(){for(let e of this.simpleProperties)this.obj[e](this.get(e))}createObject(){return Promise.resolve(this.constructObject()).then(this.processNewObj.bind(this))}processNewObj(e){return e.ipymodelId=this.model_id,e.ipymodel=this,this.obj=e,e}setupListeners(){for(let t of this.childModelProperties){var e=this.get(t);e&&(this.listenTo(e,"change",this.onChildChanged.bind(this)),this.listenTo(e,"childchange",this.onChildChanged.bind(this))),this.on("change:"+t,((e,s,i)=>{const r=this.previous(t),a=s;r&&this.stopListening(r),a&&(this.listenTo(a,"change",this.onChildChanged.bind(this)),this.listenTo(a,"childchange",this.onChildChanged.bind(this)))}),this)}for(let e of this.datawidgetProperties)a.listenToUnion(this,e,this.onChildChanged.bind(this),!1);this.on("change",this.onChange,this),this.on("msg:custom",this.onCustomMessage,this)}onChange(e,t){"pushFromObject"!==t&&this.syncToObject()}onChildChanged(e,t){this.trigger("childchange",this)}onCustomMessage(e,t){}}t.ScaleModel=n,n.serializers=i.WidgetModel.serializers,n.model_module=o.MODULE_NAME,n.model_module_version=o.MODULE_VERSION,n.view_name=null,n.view_module=null,n.view_module_version=o.MODULE_VERSION;class l extends n{defaults(){return Object.assign(Object.assign({},super.defaults()),{domain:[0,1],clamp:!1})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("domain","clamp")}}t.SequentialScaleModel=l,l.serializers=Object.assign({},n.serializers);class d extends n{defaults(){return Object.assign(Object.assign({},super.defaults()),{domain:[0,1],range:[0,1]})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("domain","range")}constructObject(){return r.scaleQuantize()}}t.QuantizeScaleModel=d,d.serializers=Object.assign({},n.serializers),d.model_name="QuantizeScaleModel";class c extends n{defaults(){return Object.assign(Object.assign({},super.defaults()),{domain:[0],range:[0]})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("domain","range")}constructObject(){return r.scaleQuantile()}}t.QuantileScaleModel=c,c.serializers=Object.assign({},n.serializers),c.model_name="QuantileScaleModel";class u extends n{defaults(){return Object.assign(Object.assign({},super.defaults()),{domain:[],range:[0]})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("domain","range")}constructObject(){return r.scaleQuantile()}}t.TresholdScaleModel=u,u.serializers=Object.assign({},n.serializers),u.model_name="TresholdScaleModel";class h extends n{defaults(){return Object.assign(Object.assign({},super.defaults()),{domain:[],range:[],unknown:r.scaleImplicit})}createPropertiesArrays(){super.createPropertiesArrays(),this.simpleProperties.push("range","unknown")}constructObject(){return r.scaleOrdinal()}syncToModel(e){e.domain=this.obj.domain(),super.syncToModel(e)}syncToObject(){var e;super.syncToObject(),this.obj.domain(null!==(e=this.get("domain"))&&void 0!==e?e:[])}}t.OrdinalScaleModel=h,h.serializers=Object.assign(Object.assign({},n.serializers),{unknown:{deserialize:(e,t)=>"__implicit"===e?r.scaleImplicit:null===e?void 0:e,serialize:(e,t)=>e===r.scaleImplicit?"__implicit":void 0===e?null:e}}),h.model_name="OrdinalScaleModel"},7414:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DropdownView=t.WidgetDropdownModel=t.StringDropdownModel=t.SelectorBaseModel=void 0;const i=s(9812),r=s(8657),a=s(6988);class o extends i.DOMWidgetModel{defaults(){const e=this.constructor;return Object.assign(Object.assign({},super.defaults()),{_model_name:e.model_name,_model_module:e.model_module,_model_module_version:e.model_module_version,_view_name:e.view_name,_view_module:e.view_module,_view_module_version:e.view_module_version})}}t.SelectorBaseModel=o,o.serializers=Object.assign({},i.DOMWidgetModel.serializers),o.model_module=r.MODULE_NAME,o.model_module_version=r.MODULE_VERSION,o.view_name=null,o.view_module=r.MODULE_NAME,o.view_module_version=r.MODULE_VERSION;class n extends o{defaults(){return Object.assign(Object.assign({},super.defaults()),{value:null,options:[]})}getLabels(){return this.get("options")||[]}get selectedLabel(){return this.get("value")}set selectedLabel(e){this.set({value:e},"fromView"),this.save_changes()}}t.StringDropdownModel=n,n.serializers=Object.assign({},o.serializers),n.model_name="StringDropdownModel";class l extends o{defaults(){return Object.assign(Object.assign({},super.defaults()),{value:null,options:{}})}initialize(e,t){super.initialize(e,t),this.setupListeners(),this.updateReverse(this,this.get("options")||[])}setupListeners(){this.on("change:options",this.updateReverse,this)}updateReverse(e,t,s){this.reverseMap={};for(let e of Object.keys(t)){const s=t[e];s&&s.toJSON&&(this.reverseMap[t[e].toJSON({})]=e)}}getLabels(){const e=this.get("options")||{};return Object.keys(e)}get selectedLabel(){const e=this.get("value");return e&&this.reverseMap[e.toJSON(void 0)]}set selectedLabel(e){const t=this.get("options")||{};this.set({value:e&&t[e]||null},"fromView"),this.save_changes()}}t.WidgetDropdownModel=l,l.serializers=Object.assign(Object.assign({},o.serializers),{value:{deserialize:i.unpack_models},options:{deserialize:i.unpack_models}}),l.model_name="StringDropdownModel";class d extends i.DOMWidgetView{constructor(){super(...arguments),this._current_options=[]}initialize(e){super.initialize(e),this.listenTo(this.model,"change",this.onModelChange.bind(this))}onModelChange(e,t){"fromView"!==t&&this.update()}render(){super.render(),this.el.classList.add("jupyter-widgets"),this.el.classList.add("widget-inline-hbox"),this.el.classList.add("widget-dropdown"),this.listbox=document.createElement("select"),this.el.appendChild(this.listbox),this.update()}update(){const e=this.model.getLabels();a.arrayEquals(e,this._current_options)||this._updateOptions(e);const t=this.model.selectedLabel;return null===t?this.listbox.selectedIndex=-1:this.listbox.value=t,super.update()}_updateOptions(e){this.listbox.textContent="";for(let t of e){let e=document.createElement("option");e.textContent=t.replace(/ /g," "),e.value=t,this.listbox.appendChild(e)}this._current_options=e.slice()}events(){return{"change select":"_handle_change"}}_handle_change(){this.model.selectedLabel=-1===this.listbox.selectedIndex?null:this.listbox.value}}t.DropdownView=d},6988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undefSerializer=t.parseCssColor=t.arrayEquals=void 0,t.arrayEquals=function(e,t){if(e.length!==t.length)return!1;const s=e.length;for(let i=0;i<s;++i)if(e[i]!==t[i])return!1;return!0},t.parseCssColor=function(e){let t=e.match(/^#([0-9a-f]{6})$/i);if(t)return[parseInt(t[1].substr(0,2),16),parseInt(t[1].substr(2,2),16),parseInt(t[1].substr(4,2),16),255];if(t=e.match(/^rgb\((\s*(\d+)\s*),(\s*(\d+)\s*),(\s*(\d+)\s*)\)$/i),t)return[parseInt(t[2],10),parseInt(t[4],10),parseInt(t[6],10),255];if(t=e.match(/^rgba\((\s*(\d+)\s*),(\s*(\d+)\s*),(\s*(\d+)\s*),(\s*(\d\.?|\d*\.\d+)\s*)\)$/i),t)return[parseInt(t[2],10),parseInt(t[4],10),parseInt(t[6],10),Math.round(255*Math.max(0,Math.min(1,parseFloat(t[8]))))];throw new Error(`Invalid CSS color: "${e}"`)},t.undefSerializer=function(e,t){}},5766:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScaledValueModel=void 0;const i=s(9812),r=s(5486),a=s(8657),o=s(6988);class n extends i.WidgetModel{defaults(){const e=this.constructor;return Object.assign(Object.assign({},super.defaults()),{_model_name:e.model_name,_model_module:e.model_module,_model_module_version:e.model_module_version,_view_name:e.view_name,_view_module:e.view_module,_view_module_version:e.view_module_version,input:null,scale:null,output:null})}computeScaledValue(e){e="object"==typeof e?Object.assign(Object.assign({},e),{setOutputOf:this}):{setOutput:!0};let t=this.get("scale"),s=this.get("input");s instanceof n&&(s=s.get("output")),null!==s&&null!==t?this.set("output",t.obj(s),e):this.set("output",null,e)}initialize(e,t){super.initialize(e,t);const s=this.get("scale")||void 0;this.initPromise=Promise.resolve(s&&s.initPromise).then((()=>{this.computeScaledValue(),this.setupListeners()}))}setupListeners(){this.listenTo(this.get("scale"),"change",this.onChange),this.on("change:scale",((e,t,s)=>{const i=this.previous("scale"),r=t;i&&this.stopListening(i),r&&this.listenTo(r,"change",this.onChange.bind(this)),this.onChange(this)}),this),r.listenToUnion(this,"input",this.onChange.bind(this),!0)}onChange(e,t){t&&t.setOutputOf===this||this.computeScaledValue(t)}}t.ScaledValueModel=n,n.serializers={input:{deserialize:i.unpack_models},scale:{deserialize:i.unpack_models},output:{serialize:o.undefSerializer}},n.model_name="ScaledValueModel",n.model_module=a.MODULE_NAME,n.model_module_version=a.MODULE_VERSION,n.view_name=null,n.view_module=null,n.view_module_version=a.MODULE_VERSION},8657:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const i=s(306);t.MODULE_VERSION=i.version,t.MODULE_NAME=i.name},306:e=>{"use strict";e.exports=JSON.parse('{"name":"jupyter-scales","version":"3.2.0","description":"A widget library for scales","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"homepage":"https://github.com/vidartf/ipyscales","bugs":{"url":"https://github.com/vidartf/ipyscales/issues"},"repository":{"type":"git","url":"https://github.com/vidartf/ipyscales"},"license":"BSD-3-Clause","author":{"name":"Jupyter Development Team","email":"jupyter@googlegroups.com"},"files":["lib/**/*.js","lib/**/*.js.map","lib/**/*.d.ts","dist/*.js","dist/*.js.map","dist/*.d.ts","src/**/*","styles/**/*"],"main":"lib/index.js","types":"./lib/index.d.ts","scripts":{"build":"npm run build:lib && npm run build:nbextension","build:all":"npm run build:labextension && npm run build:nbextension && npm run build:prebuilt","build:labextension":"npm run clean:labextension && mkdirp lab-dist && cd lab-dist && npm pack ..","build:lib":"tsc","build:nbextension":"webpack --mode=production","build:prebuilt":"jupyter labextension build .","clean":"npm run clean:lib && npm run clean:nbextension","clean:labextension":"rimraf lab-dist","clean:lib":"rimraf lib","clean:nbextension":"rimraf ../ipyscales/nbextension/static/index.js","prepack":"npm run build:lib","prepublishOnly":"npm run clean && npm run build","test":"npm run test:chrome","test:chrome":"karma start --browsers=Chrome tests/karma.conf.js","test:ci":"karma start --browsers=ChromeCI tests/karma.conf.js","test:debug":"karma start --browsers=Chrome --debug=true tests/karma.conf.js","test:dev":"karma start --browsers=Chrome --singleRun=false tests/karma.conf.js","test:firefox":"karma start --browsers=Firefox tests/karma.conf.js","update:all":"update-dependency --minimal --regex .*","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development"},"dependencies":{"@jupyter-widgets/base":"^2.0.1 || ^3 || ^4","@phosphor/coreutils":"^1.3.0","chromabar":"^0.7.0","d3-interpolate":"^2.0.0","d3-scale":"^3.1.0","d3-scale-chromatic":"^2.0.0","d3-selection":"^1.4.0","jupyter-dataserializers":"^2.3.0","jupyter-datawidgets":"^5.4.0","ndarray":"^1.0.18"},"devDependencies":{"@jupyterlab/builder":"^3.0.0","@jupyterlab/buildutils":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@types/d3-interpolate":"^2.0.0","@types/d3-scale":"^2.1.1","@types/d3-scale-chromatic":"^2.0.0","@types/d3-selection":"^1.4.1","@types/expect.js":"^0.3.29","@types/mocha":"^8.2.0","@types/ndarray":"^1.0.6","@types/node":"^14.0.13","@types/webpack-env":"^1.13.6","expect.js":"^0.3.1","json-loader":"^0.5.7","karma":"^5.1.0","karma-chrome-launcher":"^3.0.0","karma-firefox-launcher":"^2.1.0","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-typescript":"^5.2.0","karma-typescript-es6-transform":"^5.2.0","mkdirp":"^1.0.4","mocha":"^8.0.1","npm-run-all":"^4.1.3","rimraf":"^3.0.2","source-map-loader":"^2.0.0","ts-loader":"^8.0.13","typescript":"^4.1.3","webpack":"^5.11.1","webpack-cli":"^4.3.1"},"jupyterlab":{"extension":"lib/plugin","outputDir":"lab-dist/jupyter-scales","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true},"jupyter-datawidgets":{"bundled":true,"singleton":true},"jupyter-dataserializers":{"bundled":true,"singleton":true}},"discovery":{"kernel":[{"kernel_spec":{"language":"^python"},"base":{"name":"ipyscales"},"managers":["pip","conda"]}]}}}')}}]);