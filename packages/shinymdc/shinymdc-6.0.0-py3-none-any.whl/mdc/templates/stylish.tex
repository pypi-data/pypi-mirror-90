\documentclass[letterpaper,twocolumn,10pt]{article}

\usepackage[textwidth=492pt,textheight=600pt,columnsep=12pt,footskip=50pt,footnotesep=50pt]{geometry}
\usepackage[T1]{fontenc}
\usepackage[no-math]{fontspec}
\usepackage[babel=true,protrusion=true,expansion=true]{microtype}
\usepackage[american]{babel}
\usepackage{nowidow}
\usepackage[unicode=true,hidelinks]{hyperref}
\usepackage{fancyhdr}
\usepackage[sf,bf,big,raggedright,compact]{titlesec}
\usepackage[square,numbers,super,sort&compress]{natbib}
\usepackage[export]{adjustbox}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{nidanfloat}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{booktabs}
\usepackage{footnote}
\usepackage{acronym}
\usepackage{relsize}
\usepackage{upquote}
\usepackage{fancyvrb}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mleftright}
\usepackage{bm}
\usepackage{unicode-math}
\usepackage{environ}

% Pandoc mods
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Keep aspect ratio of figures
\let\origincgfx\includegraphics
\renewcommand{\includegraphics}[2][]{\origincgfx[#1,max width=\pagewidth,max height=\pageheight,keepaspectratio]{#2}}

% Automatically use figure/figure* depending on width
\let\oldfigure\figure%
\let\endoldfigure\endfigure%
\RenewEnviron{figure}{%
  \let\oldcaption\caption%
  \let\oldlabel\label%
  \let\oldsetcaptionsubtype\setcaptionsubtype

  \renewcommand{\caption}[1]{}
  \renewcommand{\label}[1]{}
  \renewcommand{\setcaptionsubtype}{}

  \sbox{0}{\BODY}

  \renewcommand{\caption}[1]{\oldcaption{##1}}
  \renewcommand{\label}[1]{\oldlabel{##1}}
  \renewcommand{\setcaptionsubtype}{\oldsetcaptionsubtype}

  \ifdim\wd0>200pt
    \begin{figure*}[tbp]
      \BODY%
    \end{figure*}
  \else
    \begin{oldfigure}[htbp]
      \BODY%
    \end{oldfigure}
  \fi
}

% Automatically use table/table* depending on width
\let\oldtable\table%
\let\endoldtable\endtable%
\RenewEnviron{table}{%
    \let\oldcaption\caption%
    \let\oldlabel\label%

    \renewcommand{\caption}[1]{}
    \renewcommand{\label}[1]{}

    \sbox{0}{\BODY}

    \renewcommand{\caption}[1]{\oldcaption{##1}}
    \renewcommand{\label}[1]{\oldlabel{##1}}

    \ifdim\wd0>200pt
      \let\oldcolwidth\columnwidth%
      \let\columnwidth\linewidth%
      \begin{table*}[tbp]
        \BODY%
      \end{table*}
      \let\columnwidth\oldcolwidth
    \else
      \begin{oldtable}[htbp]
        \BODY%
      \end{oldtable}
    \fi
}

% Configure float placement
\setcounter{topnumber}{1}
\setcounter{dbltopnumber}{2}
\setcounter{bottomnumber}{1}
\setcounter{dblbotnumber}{1}
\setcounter{totalnumber}{2}
\renewcommand{\topfraction}{0.9}
\renewcommand{\dbltopfraction}{0.8}
\renewcommand{\bottomfraction}{0.9}
\renewcommand{\textfraction}{0.2}
\renewcommand{\floatpagefraction}{0.8}
\renewcommand{\dblfloatpagefraction}{0.8}
\setlength{\textfloatsep}{32pt plus 4pt minus 2pt}
\setlength{\floatsep}{12pt plus 4pt minus 2pt}
\setlength{\intextsep}{12pt plus 4pt minus 2pt}
\makeatletter
\def\fps@figure{htbp}
\def\fps@table{htbp}
\makeatother

% Configure float arrangement on float-only pages
\makeatletter
\setlength{\@fptop}{0pt}
\setlength{\@fpsep}{12pt}
\setlength{\@fpbot}{0pt plus 1fil}
\makeatother

% Use mleftright
\renewcommand\left\mleft%
\renewcommand\right\mright%

% Automatically use \left and \right with parentheses
\makeatletter
\def\resetMathstrut@{%
  \setbox\z@\hbox{%
    \mathchardef\@tempa\mathcode`\[\relax
    \mathchardef\@tempc\mathcode`\]\relax
    \def\@tempb##1"##2##3{\the\textfont"##3\char"}%
    \expandafter\@tempb\meaning\@tempa \relax
  }%
  \ht\Mathstrutbox@\ht\z@ \dp\Mathstrutbox@\dp\z@}
\makeatother
\begingroup
  \catcode`(\active \xdef({\left\string(}
  \catcode`)\active \xdef){\right\string)}
\endgroup
\mathcode`(="8000 \mathcode`)="8000

% Put year in citet
\newcommand*{\nolink}[1]{{\protect\NoHyper#1\protect\endNoHyper}}
\renewcommand{\citet}[1]{\nolink{\citeauthor{#1} (\citeyear{#1})}\citep{#1}}

% Set fonts
\setmainfont{EBGaramond}[
  Extension=.otf,
  UprightFont=*-Regular,
  ItalicFont=*-Italic,
  BoldFont=*-Bold,
  BoldItalicFont=*-BoldItalic,
  Numbers={Lining},
]
\setsansfont{SourceSansPro}[
  Extension=.otf,
  UprightFont=*-Regular,
  ItalicFont=*-RegularIt,
  BoldFont=*-Bold,
  BoldItalicFont=*-BoldIt,
]
\setmonofont{lmmono10-regular.otf}
\setmathfont{Garamond-Math.otf}

% Configure acronym font
\renewcommand*{\acsfont}[1]{{\addfontfeature{LetterSpace=10.0}\scshape\textsmaller{#1}}}

% Configure caption font
\captionsetup{justification=raggedright,font={sf,small}}

% Add periods after section numbers
\titlelabel{\thetitle.\enskip}

% Configure page no.
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\fancyfoot[R]{{\normalfont\sffamily\scriptsize\thepage}}

% Configure title format
\makeatletter
\def\@maketitle{%
  \newpage
  \vspace*{2ex}%
  \begin{flushleft}%
    \normalfont\sffamily%
    {\bfseries\Huge \@title}%
    \medbreak%
    {\large \@author}%
  \end{flushleft}%
  \vspace*{5ex}%
  \par
}
\makeatother

% Set title, author, date
\title{$title$}
\author{$for(author)$\mbox{$author.name$\textsuperscript{$author.affiliation.id$$if(author.equalcontrib)$$if(skipequal)$$else$,*$endif$$endif$}}$sep$\quad $endfor$}
\date{}

% Provide command for footnote without marker
\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{\raggedright\hspace{-2em} #1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}

$for(include-before)$$include-before$$endfor$

\begin{document}

% Enable french spacing
\frenchspacing

\maketitle

\thispagestyle{fancy}
\parindent=2em
\setnowidow[2]

% Add author-info footnote.
\blfootnote{%
  {%
    \normalfont\sffamily\scriptsize%
    $if(skipequal)$$else$\mbox{\textsuperscript{*}Equal contribution.}\enskip$endif$%
    $for(institute)$\mbox{\textsuperscript{$institute.id$}$institute.name$.}\enskip$endfor$%
    Email:~$for(author)$\mbox{\texttt{$author.email$}}$sep$, $endfor$.%
  }%
}

$if(abstract)$
\hrule height 1pt
\vspace{1ex}%
{\parindent=0pt \normalfont\sffamily\small $abstract$}
\vspace{1ex}%
\hrule height 1pt
\vspace{1ex}
$endif$

$body$

$if(bibliography)$
\footnotesize
\bibliographystyle{unsrtnat}
\bibliography{$bibliography$}
\normalsize
$endif$

$if(appendix)$
\renewcommand\thefigure{S\arabic{figure}}
\renewcommand\thetable{S\arabic{table}}
\setcounter{figure}{0}
\setcounter{table}{0}
\clearpage
\appendix
\input{$appendix$}
$endif$

\end{document}
