\documentclass{article}

\usepackage{$if(local)$iclr$else$$dotmdc$/iclr$endif$,times}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[babel=true,protrusion=true,expansion=true]{microtype}
\usepackage[american]{babel}
\usepackage{nowidow}
\usepackage[unicode=true,hidelinks]{hyperref}
\usepackage{url}
\usepackage[export]{adjustbox}
\usepackage{subcaption}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{booktabs}
\usepackage{footnote}
\usepackage{acronym}
\usepackage{relsize}
\usepackage{upquote}
\usepackage{fancyvrb}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mleftright}
\usepackage{bm}

% Pandoc mods
\providecommand{\tightlist}{\setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Keep aspect ratio of figures
\let\origincgfx\includegraphics
\renewcommand{\includegraphics}[2][]{\origincgfx[#1,max width=\pagewidth,max height=\pageheight,keepaspectratio]{#2}}

% Configure float placement
\setcounter{topnumber}{2}
\setcounter{bottomnumber}{1}
\setcounter{totalnumber}{3}
\renewcommand{\topfraction}{0.9}
\renewcommand{\bottomfraction}{0.9}
\renewcommand{\textfraction}{0.1}
\renewcommand{\floatpagefraction}{0.8}
\setlength{\textfloatsep}{32pt plus 4pt minus 2pt}
\setlength{\floatsep}{12pt plus 4pt minus 2pt}
\setlength{\intextsep}{12pt plus 4pt minus 2pt}
\makeatletter
\def\fps@figure{htbp}
\def\fps@table{htbp}
\makeatother

% Configure float arrangement on float-only pages
\makeatletter
\setlength{\@fptop}{0pt}
\setlength{\@fpsep}{12pt}
\setlength{\@fpbot}{0pt plus 1fil}
\makeatother

% Use mleftright
\renewcommand\left\mleft
\renewcommand\right\mright

% Automatically use \left and \right with parentheses
\makeatletter
\def\resetMathstrut@{%
  \setbox\z@\hbox{%
    \mathchardef\@tempa\mathcode`\[\relax
    \mathchardef\@tempc\mathcode`\]\relax
    \def\@tempb##1"##2##3{\the\textfont"##3\char"}%
    \expandafter\@tempb\meaning\@tempa \relax
  }%
  \ht\Mathstrutbox@\ht\z@ \dp\Mathstrutbox@\dp\z@}
\makeatother
\begingroup
  \catcode`(\active \xdef({\left\string(}
  \catcode`)\active \xdef){\right\string)}
\endgroup
\mathcode`(="8000 \mathcode`)="8000

% Configure acronym font
\renewcommand*{\acsfont}[1]{{\addfontfeature{LetterSpace=10.0}\scshape\textsmaller{#1}}}

\title{%
\begin{flushleft}%
$title$%
\end{flushleft}%
}

\author{%
$for(author)$%
\mbox{$author.name$$if(author.equalcontrib)$$if(skipequal)$$else$$$^\ast$$$endif$$endif$}\\
$author.affiliation.name$\\
\mbox{\texttt{$author.email$}}%
$sep$\AND$endfor$%
}

% Provide command for footnote without marker
\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{\raggedright\hspace{-2em} #1}%
  \addtocounter{footnote}{-1}%
  \endgroup
}

\newcommand{\fix}{\marginpar{FIX}}
\newcommand{\new}{\marginpar{NEW}}

$if(submission)$$else$\iclrfinalcopy$endif$

$for(include-before)$$include-before$$endfor$

\begin{document}

% Enable french spacing
\frenchspacing

\maketitle

\setnowidow[2]

$if(skipequal)$$else$\blfootnote{\textsuperscript{\ast}Equal contribution.}$endif$

$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
$endif$

$body$

$if(bibliography)$
\small
\bibliography{$bibliography$}
\bibliographystyle{$if(local)$iclr$else$$dotmdc$/iclr$endif$}
\normalsize
$endif$

$if(appendix)$
\renewcommand\thefigure{S\arabic{figure}}
\renewcommand\thetable{S\arabic{table}}
\setcounter{figure}{0}
\setcounter{table}{0}
\clearpage
\appendix
\input{$appendix$}
$endif$

\end{document}
