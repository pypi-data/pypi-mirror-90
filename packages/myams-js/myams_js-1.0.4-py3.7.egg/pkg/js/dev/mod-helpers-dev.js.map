{"version":3,"sources":["mod-helpers.js"],"names":["$","MyAMS","helpers","refreshElement","form","options","Promise","resolve","reject","element","object_id","core","executeFunctionByName","config","clearContent","document","then","replaceWith","content","initContent","refreshWidget","widget","widget_id","group","parents","refreshTableRow","selector","row_id","row","table","first","dtTable","DataTable","data","newRow","refreshImage","image","image_id","attr","src","moveElementToParentEnd","parent","detach","appendTo","hideDropdown","evt","target","closest","dropdown","window","env","bundle","modules","push","console","debug"],"mappings":"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","sourcesContent":["/* global MyAMS */\n/**\n * MyAMS generic helpers\n */\n\nconst $ = MyAMS.$;\n\n\nexport const helpers = {\n\n\t/**\n\t * Refresh a DOM element with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: element properties:\n\t *   - object_id: ID of the refreshed element\n\t *   - content: new element content\n\t */\n\trefreshElement: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet element = $(`[id=\"${options.object_id}\"]`);\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, element).then(() => {\n\t\t\t\telement.replaceWith($(options.content));\n\t\t\t\telement = $(`[id=\"${options.object_id}\"]`);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, element).then(() => {\n\t\t\t\t\tresolve(element);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a form widget with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated widget properties:\n\t *   - widget_id: ID of the refreshed widget\n\t *   - content: new element content\n\t */\n\trefreshWidget: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet widget = $(`[id=\"${options.widget_id}\"]`),\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.clearContent, document, group).then(() => {\n\t\t\t\tgroup.replaceWith($(options.content));\n\t\t\t\twidget = $(`[id=\"${options.widget_id}\"]`);\n\t\t\t\tgroup = widget.parents('.widget-group');\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent, document, group).then(() => {\n\t\t\t\t\tresolve(widget);\n\t\t\t\t}, reject);\n\t\t\t}, reject);\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a table row with content provided in\n\t * the <code>options</code> object\n\t *\n\t * @param form: optional parent form\n\t * @param options: updated row properties:\n\t *   - row_id: ID of the refreshed row\n\t *   - content: new row content\n\t */\n\trefreshTableRow: (form, options) => {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst\n\t\t\t\tselector = `tr[id=\"${options.row_id}\"]`,\n\t\t\t\trow = $(selector),\n\t\t\t\ttable = row.parents('table').first(),\n\t\t\t\tdtTable = table.DataTable();\n\t\t\tif (options.data) {\n\t\t\t\tdtTable.row(selector).data(options.data);\n\t\t\t\tresolve(row);\n\t\t\t} else {\n\t\t\t\tconst newRow = $(options.content);\n\t\t\t\trow.replaceWith(newRow);\n\t\t\t\tMyAMS.core.executeFunctionByName(MyAMS.config.initContent,\n\t\t\t\t\tdocument, newRow).then(() => {\n\t\t\t\t\tresolve(newRow);\n\t\t\t\t}, reject);\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t * Refresh a single image with content provided in\n\t * the <code>options</code> object.\n\t *\n\t * @param form: optional parent element\n\t * @param options: image properties:\n\t *   - image_id: ID of the refreshed image\n\t *   - src: new image source URL\n\t */\n\trefreshImage: (form, options) => {\n\t\tconst image = $(`[id=\"${options.image_id}\"]`);\n\t\timage.attr('src', options.src);\n\t},\n\n\t/**\n\t * Move given element to the end of it's parent\n\t *\n\t * @param element: the element to be moved\n\t * @returns {*}\n\t */\n\tmoveElementToParentEnd: (element) => {\n\t\tconst parent = element.parent();\n\t\treturn element.detach()\n\t\t\t.appendTo(parent);\n\t},\n\n\t/**\n\t * Toggle dropdown associated with given event target\n\t *\n\t * @param evt: source event\n\t */\n\thideDropdown: (evt) => {\n\t\t$(evt.target).closest('.dropdown-menu').dropdown('hide');\n\t}\n};\n\n\n/**\n * Global module initialization\n */\nif (window.MyAMS) {\n\tif (MyAMS.env.bundle) {\n\t\tMyAMS.config.modules.push('helpers');\n\t} else {\n\t\tMyAMS.helpers = helpers;\n\t\tconsole.debug(\"MyAMS: helpers module loaded...\");\n\t}\n}\n"],"file":"mod-helpers-dev.js"}